# 🏭 MSW 濾網再生系統 - 使用者指南

> **版本**: v2.0
> **更新日期**: 2025-10-17

---

## 📚 目錄

1. [系統概述](#系統概述)
2. [生管人員操作指南](#生管人員操作指南)
3. [作業員操作指南](#作業員操作指南)
4. [常見問題](#常見問題)

---

## 系統概述

MSW 濾網再生系統提供兩種主要使用介面：

### 🎯 生管人員介面
- **功能**: 批次建立工單、生產排程、工單管理
- **權限**: 管理員 (SYSTEM_ADMIN)、主管 (MANAGER)
- **進入方式**: 登入後，側邊欄 → "MES 製程管理" → "🏭 生管派工"

### 👷 作業員介面
- **功能**: 查看工單列表、執行生產作業
- **權限**: 一般員工 (OPERATOR)
- **進入方式**: 登入後自動顯示工單列表

---

## 生管人員操作指南

### 📋 步驟 1: 登入系統

1. 開啟瀏覽器訪問系統網址
2. 輸入管理員帳號和密碼
   - 預設管理員: `admin` / `admin123`
3. 點擊「登入」

### 🏭 步驟 2: 進入生管派工頁面

1. 登入後進入後台系統
2. 點擊左側選單 **"MES 製程管理"**
3. 點擊 **"🏭 生管派工"**

### 📊 步驟 3: 查看統計資訊

頁面頂部顯示四個統計卡片：

| 統計項目 | 說明 |
|---------|------|
| **總工單數** | 系統中所有工單總數 |
| **待處理** | 尚未開始作業的工單 |
| **進行中** | 正在生產流程中的工單 |
| **已完成** | 完成所有站點作業的工單 |

### ➕ 步驟 4: 批次建立工單

#### 4.1 填寫批次建立表單

| 欄位 | 說明 | 範例 |
|------|------|------|
| **濾網類型** | 選擇要再生的濾網類型 | 活性碳濾網 |
| **來源廠別** | 濾網來源工廠 | 柳營廠 |
| **再生次數** | 此批濾網的再生次數 | R0 (首次再生) |
| **每批數量** | 每個工單的濾網片數 | 50 |
| **批次數量** | 要建立的工單數量 | 5 |

#### 4.2 預覽工單

1. 填寫完表單後，點擊 **"預覽"** 按鈕
2. 系統顯示將建立的工單資訊
3. 確認資訊正確

#### 4.3 執行批次建立

1. 確認無誤後，點擊 **"批次建立"** 按鈕
2. 系統自動產生工單號碼 (格式: `MSW-2025-0001`)
3. 顯示成功訊息
4. 工單列表自動更新

### 🔍 步驟 5: 管理工單列表

#### 5.1 使用篩選功能

- **狀態篩選**: 選擇工單狀態（全部、待處理、進行中、已完成）
- **搜尋**: 輸入工單號或批次號快速查找

#### 5.2 查看工單詳情

工單列表顯示以下資訊：
- 工單編號
- 批次號
- 濾網類型
- 數量
- 再生次數
- 來源廠別
- 狀態
- 建立時間

---

## 作業員操作指南

### 👤 步驟 1: 登入系統

1. 開啟瀏覽器訪問系統網址
2. 輸入作業員帳號和密碼
   - 測試帳號: `operator1` / `pass123`
3. 點擊「登入」
4. **自動進入工單列表頁面**

### 📋 步驟 2: 瀏覽工單列表

登入後，系統自動顯示所有可執行的工單：

- 頁面頂部顯示您的姓名和工號
- 工單以卡片形式呈現
- 每個卡片顯示工單基本資訊和進度

### 🔍 步驟 3: 篩選工單

#### 3.1 使用篩選器

| 篩選器 | 功能 |
|--------|------|
| **狀態篩選** | 選擇 "待處理"、"進行中" 或 "已完成" |
| **濾網類型** | 選擇特定類型的濾網 |
| **搜尋框** | 輸入工單號或批次號 |

#### 3.2 查看工單資訊

每個工單卡片顯示：
- 工單編號
- 批次號
- 濾網類型
- 數量（片數）
- 再生次數
- 來源廠別
- 進度條（顯示完成百分比）
- 建立時間

### ▶️ 步驟 4: 開始作業

1. 點擊要處理的工單卡片
2. 系統自動跳轉至 **站點作業頁面**
3. 工單資料自動載入並顯示

### 📝 步驟 5: 填寫作業資料

#### 5.1 確認基本資訊

系統自動填入以下資料（已鎖定，不可修改）：
- 工單編號

可編輯的欄位：
- 批次號
- 來源廠別（radio 單選）
- 濾網類型（radio 單選）
- 數量
- 再生次數（radio 單選）

#### 5.2 填寫站點作業資料

以除膠站為例：
- **作業人員**: 自動填入您的姓名（鎖定）
- **開始時間**: 自動填入當前時間（可修改）
- **完成時間**: 手動填入（可選）

### ✅ 步驟 6: 儲存作業

1. 確認所有資料正確
2. 點擊 **"✓ 儲存並完成"** 按鈕
3. 系統儲存資料並更新工單狀態

### ↩️ 步驟 7: 返回工單列表

#### 方法一：完成作業後
- 儲存成功後，表單自動重置
- 可繼續處理下一個工單

#### 方法二：取消作業
1. 點擊 **"取消"** 按鈕
2. 確認對話框點擊 **"確定"**
3. **自動返回工單列表頁面**

### 🔄 步驟 8: 繼續處理其他工單

返回工單列表後：
1. 已完成的工單進度會更新
2. 狀態會變更為 "進行中"
3. 可繼續選擇其他工單

---

## 常見問題

### Q1: 工單號碼是如何產生的？

**A**: 工單號碼由系統自動產生，格式為 `MSW-YYYY-NNNN`
- `MSW`: 系統代碼
- `YYYY`: 年份（例如：2025）
- `NNNN`: 4位數序號（例如：0001）

範例: `MSW-2025-0001`

---

### Q2: 批次建立時，每個工單有什麼不同？

**A**: 批次建立的工單具有：
- **相同**: 濾網類型、來源廠別、再生次數、數量
- **不同**: 工單號碼（序號遞增）、批次號（對應工單號）

---

### Q3: 作業員登入後看不到工單列表怎麼辦？

**A**: 請確認：
1. 帳號角色是否為 "一般員工"
2. 是否已分配站點權限
3. 系統中是否有工單資料

如仍有問題，請聯繫管理員。

---

### Q4: 點擊工單後，資料沒有自動載入？

**A**: 請檢查：
1. URL 是否包含 `workOrderNo` 參數
2. 工單號是否正確
3. 重新整理頁面後再試

---

### Q5: 取消按鈕沒有返回工單列表？

**A**: 此功能已修正，請確認：
1. 您的帳號是 "一般員工" 角色
2. 點擊取消後會出現確認對話框
3. 點擊確定後應自動返回 `/` (工單列表頁面)

如仍無法返回，請檢查瀏覽器 Console 是否有錯誤訊息。

---

### Q6: 工單進度如何計算？

**A**: 工單進度根據完成的站點數量計算：
- 完成除膠站: +25%
- 完成烘烤站: +25%
- 完成除氣測試: +25%
- 完成 AOI 檢測: +25%

總計: 100% = 完成所有站點作業

---

### Q7: 可以刪除或修改已建立的工單嗎？

**A**:
- **未開始的工單**: 管理員可在工單管理頁面刪除
- **進行中的工單**: 需透過異動審核流程
- **已完成的工單**: 已鎖定，需申請解鎖後才能修改

---

### Q8: 忘記密碼怎麼辦？

**A**: 請聯繫系統管理員重設密碼。

---

### Q9: 可以同時處理多個工單嗎？

**A**: 可以！作業員可以：
1. 從工單列表選擇工單 A
2. 填寫部分資料（不儲存）
3. 點擊取消返回列表
4. 選擇工單 B
5. 完成後再回來處理工單 A

但建議完成一個工單後再處理下一個，避免資料混淆。

---

### Q10: 測試帳號有哪些？

**A**:
| 角色 | 帳號 | 密碼 | 權限 |
|------|------|------|------|
| 管理員 | admin | admin123 | 所有功能 |
| 主管 | manager1 | pass123 | 生管派工、報表 |
| 作業員 | operator1 | pass123 | 工單列表、站點作業 |

---

## 🆘 技術支援

如遇到任何問題，請：
1. 查看本使用者指南
2. 查閱測試報告 (`TESTING_REPORT.md`)
3. 聯繫系統管理員

---

## 📝 版本歷史

### v2.0 (2025-10-17)
- ✨ 新增生管派工批次建立功能
- ✨ 新增作業員工單列表介面
- ✨ 新增工單號自動產生機制
- 🔧 修正取消按鈕返回路徑
- 📚 完善使用者指南

---

**祝您使用愉快！** 🎉
