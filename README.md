# Dash MSW

柳營再生濾網製程管理系統（Manufacturing System for Workflow），整合 MES+SPC+WMS+能源管理於一體。

## 版本資訊

- **目前版本**: v2.2.0
- **最後更新**: 2025-10-17
- **來源**: 從 Dash RMS v0.5.6 複製並客製化
- **專案定位**: 基於研華 IoTSuite 數據中台的柳營再生濾網專業製程管理系統
- **線上展示**: [https://dash-msw.vercel.app](https://dash-msw.vercel.app)

## 專案概述

Dash MSW 是一套針對柳營再生濾網製程設計的整合管理系統，充分運用現有研華 IoTSuite 數據中台完善基礎設施，實現從工單建立到出貨交付的完整半自動化數位管理。

### 核心特色

- ✅ **充分運用現有基礎建設**: 烘箱 ECU、所羅門 AOI 檢測、電表 MAU、FFU 等設備數據已完整收集
- ✅ **零額外建置成本**: 不需額外感測器或數據收集設備投資
- ✅ **能源數據與製程管理完美結合**: 柳營再生廠最重要的核心特色
- ✅ **RFID 再生次數追蹤**: 鐳雕再生產品序號 (R0) 及 RFID 再生次數追蹤
- ✅ **接近全自動化**: 再生製程搭配現有數據基礎，實現最少人為介入

## 快速開始

### 安裝與運行

```bash
# 克隆專案
git clone https://github.com/seikaikyo/Dash-MSW.git
cd Dash-MSW

# 安裝依賴
npm install

# 開發模式
npm run dev

# 建置生產版本
npm run build

# 預覽建置結果
npm run preview
```

### 測試帳號

系統已預設建立測試帳號：

| 角色 | 帳號 | 密碼 | 權限 |
|------|------|------|------|
| 管理員 | admin | admin123 | 所有功能 |
| 主管 | manager1 | pass123 | 生管派工、報表 |
| 作業員 | operator1 | pass123 | 工單列表、站點作業 |

## 再生濾網製程流程

```
工單建立 → 除膠站點 → 烘箱處理 → OQC檢驗 → RFID標籤更換 → 包裝堆棧 → 成品入庫 → 出庫出貨
```

### 製程站點對應系統功能

| 製程站點 | 系統功能 | 自動化程度 |
|---------|---------|-----------|
| **1. 工單建立** | MES 自動工單生成、批次管理 | 全自動 |
| **2. 除膠站點** | 自動記錄時間與作業參數 | 自動記錄 |
| **3. 烘箱處理** | 整合 ECU 數據、能耗分析 | 自動監控 |
| **4. OQC 檢驗** | 釋氣抽檢 + AOI 自動判定 | 半自動 |
| **5. RFID 更換** | 再生次數自動更新 (R0→R1) | 全自動 |
| **6. 包裝堆棧** | Pallet 綁定、RFID 追蹤 | 自動綁定 |
| **7. 成品入庫** | WMS 智能庫位分配 | 自動分配 |
| **8. 出庫出貨** | 工單物流單自動對應 | 全自動 |

## 系統功能模組

### MES 製程管理系統

- ✅ 工單自動生成與管理
- ✅ 工單號自動產生器 (MSW-YYYY-NNNN 格式)
- ✅ 批次建立工單功能 (生管派工)
- ✅ 作業員工單列表介面 (平板友善設計)
- ✅ **排程視圖系統** (v2.2 新增)
  - 📅 日曆視圖：月曆格式顯示工單分布
  - 📊 甘特圖：進度條展示站點完成度
  - 📋 看板視圖：拖放式狀態管理
- ✅ 批次追蹤（來源廠別管理）
- ✅ 製程站點時間自動記錄
- ✅ 工單自動載入機制
- ✅ RFID 再生次數追蹤 (R0→R1→R2...)
- ✅ 鐳雕序號管理
- ✅ 異常處理與記錄

### SPC 統計製程管制

- ✅ 所羅門 AOI 檢測數據整合
- ✅ 釋氣抽檢流程（18抽1、未達標加抽2片）
- ✅ 品質管制圖（X-bar/R-bar）
- ✅ Cpk/Ppk 製程能力分析
- ✅ 異常偵測與警示
- ✅ 回爐重烤機制

### WMS 倉儲管理系統

- ✅ Pallet 綁定（一 Pallet 多濾網 ID）
- ✅ RFID 與條碼雙重追蹤
- ✅ 智能庫位分配
- ✅ 入庫出庫管理
- ✅ 先進先出原則
- ✅ 報廢品隔離管理
- 🔄 AGV 預留接口（規劃中）

### 能源管理系統

- ✅ 烘箱 ECU 能耗監控
- ✅ 所羅門 AOI 設備耗電
- ✅ MAU/FFU 廠務設備能耗
- ✅ 單位濾網能源成本計算
- ✅ 能耗異常預警
- ✅ 節能建議分析

### 完整簽核流程（從 RMS 繼承）

- ✅ 並簽、串簽、條件分支
- ✅ 簽核流程視覺化設計器
- ✅ 簽核歷史追蹤

### 權限管理（RBAC）

- ✅ 基於角色的存取控制
- ✅ 自訂角色建立
- ✅ 細粒度權限控制
- ✅ 操作日誌系統

## 技術架構

### 核心技術棧

- **建置工具**: Vite 7.1.9
- **核心框架**: Vanilla JavaScript (ES6+)
- **樣式系統**: CSS Variables + 響應式設計
- **拖拽功能**: @dnd-kit
- **PDF 生成**: jsPDF
- **畫布處理**: html2canvas
- **圖表繪製**: Chart.js
- **資料儲存**: LocalStorage（可擴展至資料庫）

### 數據整合架構

```
┌─────────────────────────────────────────────────────┐
│              Dash MSW 前端應用                       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────┐│
│  │   MES    │ │   SPC    │ │   WMS    │ │  能源   ││
│  └──────────┘ └──────────┘ └──────────┘ └─────────┘│
└──────────────────┬──────────────────────────────────┘
                   │ IoTEdge RestfulAPI
┌──────────────────┴──────────────────────────────────┐
│           研華 IoTSuite 數據中台                     │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────┐│
│  │ 烘箱 ECU │ │ AOI 檢測 │ │ 電表 MAU │ │   FFU   ││
│  └──────────┘ └──────────┘ └──────────┘ └─────────┘│
└─────────────────────────────────────────────────────┘
```

## 專案結構

```
MSW/
├── src/
│   ├── industries/              # 產業模組
│   │   └── filter-regeneration/ # 柳營再生濾網模組
│   │       ├── fields.config.js # 欄位定義（6大群組）
│   │       ├── validations.js   # 驗證規則
│   │       └── templates.js     # 工單範本（6種預設）
│   ├── modules/                 # 功能模組（待新增）
│   │   ├── wms/                # WMS 倉儲管理
│   │   ├── energy/             # 能源管理
│   │   ├── process/            # 製程站點管理
│   │   └── rfid/               # RFID 追蹤
│   ├── services/                # 服務層（待新增）
│   │   └── iotEdgeService.js   # IoTEdge 通訊服務
│   ├── components/              # UI 元件
│   ├── pages/                   # 頁面元件
│   ├── config/                  # 系統配置
│   ├── utils/                   # 工具函數
│   └── styles/                  # 全域樣式
├── docs/                        # 文件
├── dev.md                       # 開發手冊
├── package.json                # 專案配置
└── README.md                   # 專案說明
```

## 開發計畫

### Phase 1: 基礎架構（已完成✅）

- ✅ 從 RMS 複製專案架構
- ✅ 建立 MSW 產業模組（filter-regeneration）
- ✅ 定義完整欄位配置（6 大群組）
- ✅ 建立驗證規則
- ✅ 建立工單範本系統

### Phase 2: 核心功能（已完成✅）

- ✅ 更新核心術語（配方→工單）
- ✅ 生管派工批次建立功能
- ✅ 工單號自動產生器 (MSW-YYYY-NNNN)
- ✅ 作業員工單列表介面
- ✅ 工單自動載入機制
- ✅ 整合自動化測試系統
- ✅ 排程視圖系統（日曆/甘特圖/看板）

### Phase 3: 整合與測試（規劃中📋）

- 📋 IoTEdge RestfulAPI 整合
- 📋 所羅門 AOI 數據整合
- 📋 烘箱 ECU 數據整合
- 📋 完整流程測試

### Phase 4: 進階功能（規劃中📋）

- 📋 AGV 自動搬運接口
- 📋 Golden Process 機制
- 📋 報表與數據分析
- 📋 後端 API 開發

## 系統優勢

### 基礎建設優勢

- ✅ 充分運用現有研華 IoTSuite 數據中台 50,000 點位授權
- ✅ 烘箱 ECU、所羅門 AOI、電表 MAU、FFU 設備數據已完整收集
- ✅ 不需額外感測器或數據收集設備建置成本

### 能源整合優勢

- ✅ 製程能耗即時監控與分析，實現精準成本控制
- ✅ 品質與能耗關聯分析，找出最佳效率平衡點
- ✅ 設備能效最佳化建議，降低單位產品能源成本

### 自動化程度優勢

- ✅ 工單自動生成與派工，無需人工建立
- ✅ 製程參數自動記錄，避免人工遺漏
- ✅ AOI 檢測結果自動判定與統計
- ✅ RFID 再生次數自動追蹤與標籤列印
- ✅ 庫存管理全自動化，Pallet 智能分配

## 與 RMS/EAP 的關係

- **RMS (配方管理系統)**: MSW 的核心架構來源，繼承完整簽核流程與 SPC 模組
- **EAP (設備自動程式系統)**: 借用 ECU 通訊模組，改造為 IoTEdge 服務
- **MSW (製程管理系統)**: 專為柳營再生濾網製程設計的整合系統

## 授權

MIT License

## 作者

seikaikyo

---

**從 RMS 到 MSW 的演進**

Dash MSW 承襲 Dash RMS 的強大簽核引擎與 SPC 模組，結合 EAP 的設備通訊能力，針對柳營再生濾網製程進行深度客製化，實現 MES+SPC+WMS+能源管理的完整整合。
